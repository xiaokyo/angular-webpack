<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>视频需求</title>
</head>
<style>
    .clearfix:after {
        content: "";
        display: block;
        clear: both;
    }

    .guanlianshangpin-wrap .clos {
        background-color: orange;
        color: #fff;
        padding: 4px 10px;
        position: absolute;
        right: 8px;
        top: 8px;
        border-radius: 3px;
        font-size: 12px;
        cursor: pointer;
    }

    body .guanlianshangpin {
        width: 700px;
        height: 500px;
    }

    .guanlianshangpin ul {
        padding: 40px 20px 10px 20px;
        font-size: 14px;
        line-height: 30px;
        overflow-y: auto;
        height: 475px;
    }

    .guanlianshangpin ul li span {
        float: left;
    }

    .guanlianshangpin ul li span:nth-child(2) {
        color: #999;
        word-wrap: break-word;
        width: 470px;
    }

    .table-con-box tr button {
        background-color: orange;
        font-size: 12px;
        color: #fff;
        padding: 3px 8px;
        margin: 0;
    }

    .selectActive {
        background: #e8f4ff;
    }

    .overTR:hover {
        background: #e8f4ff;
    }

    .ea-list-table th {
        font-size: 14px;
        /*border-right: none;*/
    }

    .ea-list-table td {
        font-size: 14px;
        /*border-right: none;*/
        max-width: 140px;
    }

    .ea-list-table td span {
	    word-break: break-word;
	    overflow: hidden;
	    text-overflow: ellipsis;
	    display: -webkit-box;
	    -webkit-box-orient: vertical;
	    -webkit-line-clamp: 2;
    }

    .setprice label {
        margin-right: 10px;
    }

    .setprice input {
        height: 28px;
        line-height: 28px;
        padding: 0 8px;
    }

    .setprice button {
        width: 60px;
        height: 28px;
        line-height: 28px;
        border-radius: 3px;
        color: #fff;
        background: #08aceb;
    }

    .h6 {
        height: 61px;
    }

    .table-con-box tr button {
        cursor: pointer;
        border-radius: 3px;
    }

    .tan-delete-ware {
        border-radius: 4px;
        min-height: 120px;
        height: initial;
    }

    .asj-common-tan h3 {
        font-size: 14px;
        font-family: PingFangSC-Medium;
        color: rgba(102, 102, 102, 1);
        line-height: 20px;
        margin: 20px 0;
        text-align: left;
    }

    .asj-common-tan .tan-btns {
        text-align: center;
        position: initial;
    }

    .asj-common-tan .tan-btns .tan-btn1 {
        width: 80px;
        height: 30px;
        background: rgba(249, 174, 8, 1);
        border-radius: 2px;
        color: #fff;
        margin: initial;
    }

    .asj-common-tan .tan-btns .tan-btn0 {
        width: 80px;
        height: 30px;
        border-radius: 2px;
        border: 1px solid rgba(247, 157, 45, 1);
        margin: 0 20px;
        color: #F9AE08;
        background-color: #fff;
    }

    .search-box {
        width: initial;
    }

    .search-box select {
        height: 30px;
        padding: 0 10px;
        border-radius: 3px;
    }
    .col{
        border:2px solid green !important;
    }
    .videos li{
        cursor: pointer;
	      width: 304px;
	      margin: 0 10px 10px;
    }
    #uploadVideoBtn{
    display:inline-block;
    width: 80px;
    height: 30px;
    background: #fff;
    font-size: 12px;
    border: 1px solid #e1e1e1;
    border-radius: 4px;
    text-align: center;
    line-height: 29px;
    position: absolute;
    top: -4px;
    cursor: pointer;
  }
  .prism-player .prism-big-play-btn{
        width: 32px;
        height: 32px;
        left: calc(50% - 16px) !important;
        bottom: calc(50% - 16px) !important;
    }
    .prism-player .prism-big-play-btn .outter{
        width: 32px;
        height: 32px;
    }
    .prism-player .prism-cover{
            background-repeat: no-repeat;
            background-size: cover;
        }
    .ea-right-search span{
	    margin: 0;
    }
    .ea-right-search select{
	    margin-right: 20px;
    }
	.upload-warp-box .asj-common-tan{
		width: 374px;
	}
	.upload-warp-box .item-box{
		margin-bottom: 20px;
		display: flex;
		align-items: center;
		font-size: 14px;
		text-align: right;
	}
  .upload-warp-box .item-box .title{
	  width: 100px;
  }
  .upload-warp-box .item-box select,input{
	  width: 210px;
	  height: 40px;
	  border-radius:4px;
	  border:1px solid rgba(217,217,217,1);
	  position: relative;
	  padding: 0 20px 0 10px;
  }
  .upload-warp-box .item-box i{
	  position: absolute;
	  right: 60px;
  }
  .upload-warp-box .upload-list{
	  display: flex;
	  flex-wrap: wrap;
  }
  .upload-warp-box .upload-list .item{
	  width:70px;
	  height:70px;
	  border-radius:3px;
	  border:1px solid rgba(0,0,0,0.15);
	  margin: 0 10px 10px 0;
	  display: flex;
	  align-items: center;
	  justify-content: center;
	  position: relative;
  }
  .upload-warp-box .upload-list .item:nth-child(4n){
	  margin-right: 0;
  }
  .upload-warp-box .upload-list .item i{
	  position: absolute;
	  background: url("static/image/video/close.svg") no-repeat center;
	  width: 16px;
	  height: 16px;
	  cursor: pointer;
	  right: -8px;
	  top: -8px;
  }
  .upload-warp-box .upload-list .img{
	  width: 100%;
	  height: 100%;
	  padding: 5px;
  }
  .upload-warp-box .upload-list .add-upload{
	  background:rgba(0,0,0,0.02);
	  cursor: pointer;
  }
  .upload-warp-box .asj-common-tan{
	  padding: 0;
  }
  .upload-warp-box .tan-title{
    line-height: 60px;
    border-bottom:1px solid rgba(240,240,240,1);
	  margin-bottom: initial;
  }
	.upload-warp-box .content-box{
		max-height: 400px;
		overflow-y: auto;
		padding: 20px 32px 10px 32px;
	}
	.upload-warp-box .tan-btns{
		border-top:1px solid rgba(240,240,240,1);
		padding: 0 25px;
		height: 70px;
		line-height: 70px;
	}
	.video-box .upload-list .item{
		cursor: pointer;
	}
  .video-box .upload-list .item i{
	  position: absolute;
	  background: url("static/image/video/video-btn.svg") no-repeat center;
	  width: 18px;
	  height: 18px;
	  cursor: pointer;
	  left: 50%;
	  top: 50%;
	  transform: translate(-50%,-50%);
  }
  .video-box .upload-list .active{
	  border-color: green;
  }
	.look-video .close{
		position: absolute;
		font-size: 35px;
		right: 5px;
		top: 5px;
		color: #dda863;
		z-index: 100;
		opacity: 1;
	}
    .table-con-box .descr {
        cursor: pointer;
    }
    .table-con-box .descr:hover {
        color: #F9AE08;
    }
</style>
<body>
<div class="ea-content">
    <div class="right-bar-wrap ea-right-content">
        <div class="asj-h10"></div>
        <div class="right-bar">
            <div class="ea-right-search">
                <div class="input-group search-box">
                    <div class="input-group search-box">
                        <select class="form-control top-search-sel" ng-model="searchType" ng-init="searchVideoVal = 'productName'">
                          <option value="productName">商品名称</option>
                          <option value="sku">商品SKU</option>
                          <option value="number">编号</option>
                        </select>
                        <input ng-keyup="enterSearch($event)" type="text" class="form-control top-search-inp"
                               placeholder="" ng-model="searchTxt">
                        <a role="button" class="btn btn-default top-search-btn" type="button"
                           ng-click="usersearch()">搜索</a>
                        <label style="margin-left: 15px;">
                            <span class="ng-binding">状态：</span>
                            <select class="select-search-stu" ng-model="sourcestatus"
                                    ng-change="sourcechange(sourcestatus)">
                                <option value="">所有状态</option>
                                <option value="14">需审核</option>
                                <option value="15">已拒绝</option>
                                <option value="16">已报价</option>
                                <option value="17">拍摄中</option>
                                <option value="18">已完成</option>
                            </select>
                            <span class="ng-binding">视频来源：</span>
                            <select class="select-search-stu" ng-model="types"
                                    ng-change="sourcechange(types)">
                                <option value="">所有类型</option>
                                <option value="2">平台商品拍摄</option>
                                <option value="1">独有商品拍摄</option>
                                <option value="0">店铺商品拍摄</option>
                            </select>
	                          <span class="ng-binding">商品类型：</span>
	                          <select class="select-search-stu" ng-model="mediaType"
	                                  ng-change="sourcechange()">
                                <option value="">所有类型</option>
                                <option value="1">图片</option>
                                <option value="0">视频</option>
                            </select>
                        </label>
                    </div>
                </div>
            </div>
            <div class="table-con-box">
                <table class="ea-list-table ea-erp-cs">
                    <thead>
                    <tr>
                        <th>序号</th>
                        <th>更新日期</th>
                        <th>图片</th>
                        <th>商品名称</th>
                        <th>商品SKU</th>
                        <th>类型</th>
                        <th>张数</th>
                        <th>视频来源</th>
                        <th>状态</th>
                        <th>客户</th>
                        <th>{{'101318' | translate}}</th>
                        <th>编号</th>
                        <th>商品URL</th>
                        <th>有版权价格</th>
                        <th>无版权价格</th>
                        <th>描述</th>
                        <th>状态</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody ng-click="TrClick($index)">
                    <tr ng-repeat="item in proList" ng-class='{selectActive: $index == focus,"overTR":isoverTR}'>
                        <td><span>{{($index+1)+(pageNum-1)*pageSize}}</span></td>
                        <td><span>{{item.updateDate || '--'}}</span></td>
                        <td>
                            <span><img width="50" height="50"
                                       ng-src="{{item.imageUrl.split(',')[0] | httpPrefix}}"
                                       alt=""></span>
                        </td>
                        <td>
                            <span ng-attr-title="{{item.productName}}" ng-click="detal(item)" style="cursor: pointer;">{{item.productName}}</span>
                        </td>
                        <td><span>{{item.sku}}</span></td>
                        <td><span>{{item.mediaType === 1 ? '图片' : '视频'}}</span></td>
                        <td>
	                        <span ng-if="item.mediaType === 1">{{item.quantity || '-'}}</span>
	                        <span ng-if="item.mediaType === 0">{{'-'}}</span>
                        </td>
                        <td>
                            <span ng-show="item.sourcetype == '2'">平台商品拍摄</span>
                            <span ng-show="item.sourcetype == '1'">独有商品拍摄</span>
                            <span ng-show="item.sourcetype == '0'">店铺商品拍摄</span>
                        </td>
                        <td>
                            <span ng-if="item.status =='14'" style="color: #f1ca16;">需审核</span>
                            <span ng-if="item.status =='15'" style="color: #e44101;">已拒绝</span>
                            <span ng-if="item.status =='16'" style="color: #cb7f00;">已报价</span>
                            <span ng-if="item.status =='17'" style="color: #2d7aa4;">拍摄中</span>
                            <span ng-if="item.status =='18'" style="color: #04a452;">已完成</span>
                            <span ng-show="item.sourceStatus == 1">(搜品中)</span>
                            <span ng-show="item.sourceStatus == 2">(搜品失败)</span>
                            <span ng-show="item.sourceStatus == 3">(搜品成功)</span>
                            <span ng-show="item.sourceStatus == -1">(搜品已删除)</span>
                            <span ng-show="item.sourceStatus == 8">(录入但未审核)</span>
	                          <span ng-show="item.sourceStatus == 6">(等待现有)</span>
                            <span ng-show="item.sourceStatus == 7">(初审失败)</span>
	                          <span>{{item.sourceNumber}}</span>
                        </td>
                        <td><span>{{item.customerName}}</span></td>
                        <td title="{{item.ownerName ? '群主' : '没有群主显示业务员'}}">
                          <span>
                            {{item.ownerName || item.empName}}
                            <div ng-show="!item.ownerName" style="font-size:10px;color:#ccc;transform:scale(.8)">{{'101316' | translate}}</div>
                          </span>
                        </td>
                        <td><span>{{item.number || '--'}}</span></td>
                        <td>
	                         <a ng-show="item.cjproductId"
	                            ng-href="{{'https://app.cjdropshipping.cn/product-detail.html?id='+
	                            item.cjproductId+'&token=FEBCBAAE13751F7F8E44C2F107AFB08D'}}"
	                            target="_blank">
		                          商品链接
	                         </a>
	                        <span ng-show="!item.cjproductId">--</span>
                        </td>
                        <td><span>{{item.copyrightPrice ==''? null:item.copyrightPrice| currency}}</span></td>
                        <td><span>{{item.notCopyrightPrice==''? null:item.notCopyrightPrice| currency}}</span></td>
                        <td>
                            <span class="descr" ng-attr-title="{{item.description}}" ng-click="viewText(item.description)">{{item.description}}</span>
                        </td>
                        <td>
                          <span ng-if="item.disputeId==1">纠纷进行中</span>
                          <span ng-if="item.disputeId!=1">-</span>
                        </td>
                        <td>
                            <button ng-show="item.status =='14' && item.cjproductId" style="background-color: green;" ng-click="pass(item)">通过</button>
                            <button ng-show="item.status =='14'" ng-click="unpass(item)">拒绝</button>
<!--                            <button ng-show="item.status =='17'" style="background-color: #2a82a4" ng-click="UploadVideo(item)">上传视频</button>-->
                            <span ng-show="item.status =='17' && item.schedule">上传进度:{{item.schedule}}%</span>
                            <span ng-show="item.status =='16' || item.status =='15'"> -- </span>
	                          <button ng-show="(item.status =='17' || item.status =='18') && item.mediaType === 1"
	                                  style="background-color: #2a82a4" ng-click="handleUploadImg(item)">
		                          {{item.status =='17' ? '上传图片' : '编辑图片'}}
	                          </button>
                            <button ng-show="(item.status =='17' || item.status =='18') && item.mediaType === 0"
                                    style="background-color: #2a82a4" ng-click="handleUploadVideo(item)">
	                            {{item.status =='17' ? '上传视频' : '编辑视频'}}
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <!-- 分页 -->
                <div class="no-data" ng-show="totalNum == 0" style="text-align: center;">没有数据</div>
                <page></page>
            </div>
        </div>
    </div>
</div>
<div class="asj-common-tanwrap ng-scope" ng-show="ispass">
    <div class="asj-common-tan tan-delete-ware">
        <h3 class="ng-binding">{{txt}}</h3>
        <div ng-show="txt == '是否通过?'" style="margin-bottom: 45px;">
            <h3 style="margin: initial;display: inline-block;">有版权价格:$</h3>
            <input placeholder="" ng-model="copyrightPrice"  ng-change="onChangePrice('copyrightPrice')" style="padding: 0 8px;line-height: 27px;width: 180px;">
            <h3 style="margin: initial;display: inline-block;margin-top: 10px;">无版权价格:$</h3>
            <input placeholder="" ng-model="notCopyrightPrice"   ng-change="onChangePrice('notCopyrightPrice')" style="padding: 0 8px;line-height: 27px;width: 180px;">
        </div>
        <div ng-show="txt=='是否拒绝?'" style="margin-bottom: 45px;display: flex;align-content: flex-start;">
            <h3 style="margin: initial;display: inline-block;">拒绝理由：</h3>
            <textarea style="width:220px;height: 100px;border-radius: 4px;border: 1px solid #f0f0f0;padding:8px;" ng-model="refuseReason"></textarea>
        </div>
        <div class="tan-btns">
            <a class="tan-btn1" ng-click="goclick()">确认</a>
            <a class="tan-btn0" ng-click="ispass=false">取消</a>
        </div>
    </div>
</div>

<!-- 上传视频 -->
<div class="asj-common-tanwrap upload-warp-box video-box" ng-show="isUploadVideo">
  <div class="asj-common-tan">
	  <div class="tan-title">{{videoTitle}}</div>
	  <div class="content-box">
		  <div class="item-box" ng-show="!isEdit">
			  <span class="title">视频名称：</span>
			  <input type="text" placeholder="请输入视频名称" ng-model="videoName">
		  </div>
		  <div class="item-box" ng-show="!isEdit">
			  <span class="title">有版权价格：</span>
			  <input  placeholder="请输入" type="text" ng-model="copyrightPrice" ng-change="onChangePrice('copyrightPrice')">
			  <i>$</i>
		  </div>
		  <div class="item-box" ng-show="!isEdit">
			  <span class="title">无版权价格：</span>
			  <input  placeholder="请输入" type="text" ng-model="notCopyrightPrice" ng-change="onChangePrice('notCopyrightPrice')">
			  <i>$</i>
		  </div>
		  <div class="item-box" ng-show="!isEdit">
			  <span class="title">是否免费下载：</span>
			  <select ng-model="isFree" ng-disabled="isDisabled">
				  <option value="1">是</option>
				  <option value="0">否</option>
			  </select>
		  </div>
	   <input style="display: none;" type="file" accept="video/*" id="uploadVideo"
	          onchange="angular.element(this).scope().upLoadVideoChange(this.files)">
		  <div class="upload-list">
			  <div class="item add-upload" ng-click="onUploadVideo()">
				  <img src="static/image/video/video.svg" alt="">
			  </div>
			  <div class="item" ng-class="{'active': item.checked}" ng-repeat="item in videoList" ng-click="hadleSelectVodeo(item)">
				  <img class="img" ng-src="{{item.coverURL}}" alt="">
				  <i ng-click="handleLookVideo(item)"></i>
			  </div>
		  </div>
	  </div>
    <div class="tan-btns">
      <a class="tan-btn0" ng-click="isUploadVideo = false;">关闭</a>
      <a class="tan-btn1" ng-click="handleConfirmVideo()">确定</a>
    </div>
  </div>
</div>

<!-- 上传图片 -->
<div class="asj-common-tanwrap upload-warp-box" ng-show="isUploadImg">
  <div class="asj-common-tan">
	  <div class="tan-title">{{imgTitle}}</div>
	  <div class="content-box">
	    <input style="display: none;" type="file" accept="image/*" id="uploadImg"
	           onchange="angular.element(this).scope().upLoadImgChange(this.files)">
		  <div class="upload-list">
			  <div class="item add-upload" ng-click="onUploadImg()">
				  <img src="static/image/video/img.svg" alt="">
			  </div>
			  <div class="item" ng-repeat="item in imgData">
				  <i ng-click="handleRemove(item)"></i>
				  <img class="img" ng-src="{{item}}" alt="">
			  </div>
		  </div>
	  </div>
    <div class="tan-btns">
      <a class="tan-btn0" ng-click="isUploadImg = false;">关闭</a>
      <a class="tan-btn1" ng-click="handleConfirmImg()">确定</a>
    </div>
  </div>
</div>

<!-- 查看视频 -->
<div class="asj-common-tanwrap upload-warp-box look-video" ng-if="isLookVideo">
  <div class="asj-common-tan" style="width: 500px;height: 300px;">
	  <i class="close" ng-click="handleCloseVideo()">×</i>
	  <div id="video-box"></div>
  </div>
</div>

</body>
</html>
