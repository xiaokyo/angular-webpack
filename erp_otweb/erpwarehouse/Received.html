<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>已添加调度任务</title>
</head>
<style>
    body {
        font-family: PingFangSC-Medium;
    }

    .ea-content {
        overflow: hidden;
    }

    .ea-right-search {
        padding-top: initial;
    }

    .search-box {
        width: auto;
    }

    .ea-right-search .input-group input {
        width: 400px;
        height: 40px;
        border-color: #F9AE08;
    }

    .ea-right-search .input-group a {
        width: 90px;
        height: 40px;
        line-height: 40px;
        background: rgba(249, 174, 8, 1);
    }

    .ea-right-search .add-merch a {
        width: 110px;
        height: 36px;
        border: none;
        line-height: 36px;
        background: rgba(252, 244, 217, 1);
        border-radius: 2px;
        color: #B0570A;
    }

    .ea-list-table th {
        height: 40px;
        background: rgba(252, 244, 217, 1);
        /*line-height: 40px;*/
        padding: initial;
        font-size: 14px;
        color: rgba(176, 86, 9, 1);
        /*border-right: none;*/
    }

    .ea-list-table td {
        /*border-right: none;*/
    }

    .ea-list-table .tr:hover {
        background: #faa5383b;
    }

    .relative a {
        min-width: 66px;
        min-height: 28px;
        height: initial;
        border-radius: 4px;
        border: 1px solid rgba(238, 238, 238, 1);
        display: inline-block;
    }

    .tan-add-ware {
        width: 360px;
        min-height: 180px;
        height: initial;
        background: rgba(255, 255, 255, 1);
        border-radius: 4px;
    }

    .asj-common-tan h3 {
        font-size: 14px;
        font-family: PingFangSC-Medium;
        color: rgba(102, 102, 102, 1);
        line-height: 20px;
        margin: 10px 0;
        text-align: left;
    }

    .tan-add-ware ul {
        min-height: 80px;
    }

    .tan-add-ware li {
        display: inline-block;
        font-size: 14px;
        font-family: PingFangSC-Medium;
        color: rgba(153, 153, 153, 1);
        line-height: 20px;
        margin-right: 10px;
        cursor: pointer;
        margin-bottom: 10px;
    }

    .tan-add-ware li:hover {
        color: rgba(176, 86, 9, 1);
    }

    .asj-common-tan .tan-btns {
        text-align: right;
        position: initial;
    }

    .asj-common-tan .tan-btns a {
        margin: initial;
    }

    .asj-common-tan .tan-btns .tan-btn1 {
        width: 80px;
        height: 30px;
        background: rgba(249, 174, 8, 1);
        border-radius: 2px;
        color: #fff;
    }

    .asj-common-tan .tan-btns .tan-btn0 {
        width: 80px;
        height: 30px;
        border-radius: 2px;
        border: 1px solid rgba(247, 157, 45, 1);
        margin: 0 20px;
        color: #F9AE08;
        background-color: #fff;
    }

    .tan-delete-ware {
        border-radius: 4px;
    }

    .addschFlag .tan-add-ware {
        width: 540px;
        /*height: 600px;*/
    }

    .addschFlag .tan-add-ware ul {
        padding: 0 50px;
    }

    .addschFlag .tan-add-ware li {
        display: block;
        margin-bottom: 15px;
        font-size: 14px;
        font-family: PingFangSC-Medium;
        color: rgba(176, 86, 9, 1);
        line-height: 20px;
    }

    .addschFlag .tan-add-ware li span {
        width: 90px;
        display: inline-block;
    }

    .addschFlag .tan-add-ware li input, select {
        width: 297px;
        height: 40px;
        border: 1px solid rgba(238, 238, 238, 1);
        padding: 0 8px;
    }
    .typeSelect{
        width: initial;
        height: 40px;
        border: 1px solid #F9AE08;
        padding: 0 8px;
        float: left;
    }
    .ea-list-table td {
        font-size: 12px;
        color: #000
    }

    .ea-list-table .focus {
        background: #fcf4d982;
    }

    .page-box {
        margin-left: initial !important;
        margin-top: 15px;
        margin-bottom: 120px;
    }

    .page-box .total-num, .page-box .page-index, .page-box .to-go {
        width: initial;
    }

    .asj-common-tanwrap {
        z-index: 100001;
    }

    .ea-list-table td {
        font-size: 12px;
        color: #000;
        max-width: 200px;
    }

    .ea-list-table td span {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        margin: initial;
        text-align: center;
        display: block;
        height: 20px;
        line-height: 20px;
    }
    .actc{
        background-color: #faa5383b !important;
    }
    .RowTD{
        padding: 0!important;
    }
    .RowTD .RowSpan{
        border-bottom: solid #e1e1e1 1px;
        line-height: 25px;
    }
    .RowTD .RowSpan:last-child{
        border-bottom:none;
    }
    .table-con-box{
        overflow-x: auto;
    }
    .ea-list-table{
        /*width: 2500px;*/
    }
    .MroeActin{
        position: relative;
    }
    .MroeActin a{
        color: #333333;
        line-height: 23px;
        font-size: 12px;
    }
    .MroeActin span{
        display: inline-block!important;
        width: 0;
        height: 0;
        margin-left: 2px;
        vertical-align: middle;
        border-top: 4px dashed;
        border-right: 4px solid transparent;
        border-left: 4px solid transparent;
    }
    .MroeActin ul{
        font-size: 12px;
        position: absolute;
        left: -30px;
        top: 21px;
        width: 175px;
        box-shadow: 0px 8px 20px;
        z-index: 10;
        background-color: #fff;
        border-radius: 4px;
    }
    .MroeActin ul li{
        font-size: 12px;
        line-height: 23px;
    }
    .MroeActin ul li:hover{
        background-color: #e3e3e3;
        cursor: pointer;
    }
    .tbody:hover{
        background: #fcf4d982!important;
    }
    .b{
        display: block;
        height: 1px;
        border-bottom: 1px dashed #ccc;
    }
    .qs-link{
        margin-right: 30px;
        padding: 0 5px 5px;
        /*text-decoration: underline;*/
    }
    .qs-link:hover{
        color:#F9962E;
        border-bottom: 2px solid #F9962E;
    }
    .qs-act{
        color:#F9962E;
        border-bottom: 2px solid #F9962E;
    }
    .qs-nav{
        margin-bottom: 15px;
        margin-left: 5px;
    }
</style>
<body>
<div class="ea-content asj-ware-box">
    <!-- right con -->
    <div class="right-bar-wrap ea-right-content li_ea-right-content">
        <!-- right nav -->
        <div class="asj-h10"></div>
        <!-- right search -->
        <div class="right-bar">
            <div class="qs-nav">
                <a class="qs-link" href="#/erplogistics/qswpp">包裹已签收</a>
                <a class="qs-link" href="#/erpwarehouse/Received">已签收调度任务</a>
            </div>
            <div class="ea-right-search">
                <div class="flex aic" style="align-items: center;">
                    <span>原始仓：</span><storageTab callback="storageCallback"></storageTab>
                </div>
                <div class="input-group search-box">
                    <select class="typeSelect" ng-model="SelectType" ng-change="SelectChanges()">
                        <option value="estimatedDeliveryTime">{{'101282' | translate}}</option>
                        <option value="originalWarehouse">{{'101261' | translate}}</option>
                        <option value="arrivedWarehouse">{{'101262' | translate}}</option>
                        <option value="dispatcherTaskName">{{'100254' | translate}}</option>
                        <option value="forwarderName">{{'101264' | translate}}</option>
                        <option value="parcelUse">{{'101265' | translate}}</option>
                        <option value="trackingNumber">{{'101310' | translate}}</option>
                        <option value="transferNumber">{{'101267' | translate}}</option>
                        <option value="estimatedArrivalTime">{{'101283' | translate}}</option>
                        <!--<option>包裹件数</option>-->
                        <option value="skuOrOrderId">{{'101311' | translate}}</option>
                    </select>
                    <input type="text" class="form-control top-search-inp" placeholder="{{places}}" ng-model="inputTxt"
                           ng-keyup="enterSearch($event)">
                    <a role="button" class="btn btn-default top-search-btn" type="button"
                       ng-click="Search()">{{'100025' | translate}}</a>
                </div>
            </div>
            <!-- right list -->
            <div class="table-con-box">
                <table class="ea-list-table ea-erp-cs" style="min-width: 1600px;">
                    <thead>
                    <tr>
                        <th colspan="7">{{'101308' | translate}}</th>
                        <th colspan="6">{{'101309' | translate}}</th>
                    </tr>
                    <tr>
                        <th>{{'100174' | translate}}</th>
                        <th>
                            {{'101282' | translate}}
                            <b class="b"></b>
                            {{'101283' | translate}}
                        </th>
                        <th>
                            {{'101261' | translate}}
                            <b class="b"></b>
                            {{'101262' | translate}}
                        </th>
                        <th>
                            {{'101273' | translate}}
                            <b class="b"></b>
                            {{'100824' | translate}}
                        </th>
                        <th>
                            {{'100109' | translate}}
                            <b class="b"></b>
                            {{'101267' | translate}}
                        </th>
                        <th>{{'100340' | translate}}</th>
                        <th>{{'100043' | translate}}</th>

                        <th>{{'101271' | translate}}</th>

                        <th>
                            {{'101312' | translate}}
                            <b class="b"></b>
                            {{'101265' | translate}}
                        </th>
                        <th>
                            {{'101266' | translate}}
                            <b class="b"></b>
                            {{'101267' | translate}}
                        </th>
                        <th>{{'100340' | translate}}</th>
                        <th>{{'100043' | translate}}</th>
                    </tr>
                    </thead>
                    <tbody class="tbody" ng-repeat="(index,item) in datalist" ng-click="TRclick($index,item)"  ng-class='{focus: $index == focus || item.isChild}'>
                    <tr>
                        <td rowspan="{{item.rowsNum}}">
                            <span>{{index+1}}</span>
                        </td>
                        <td rowspan="{{item.rowsNum}}">
                            <span>{{item.estimatedDeliveryTime}}</span>
                            <b class="b"></b>
                            <span>{{item.estimatedArrivalTime}}</span>
                        </td>
                        <td rowspan="{{item.rowsNum}}">
                            <span>{{item.originalWarehouseName}}</span>
                            <b class="b"></b>
                            <span>{{item.arrivedWarehouseName}}</span>
                        </td>
                        <td rowspan="{{item.rowsNum}}">
                            <span>{{item.dispatcherTaskName}}</span>
                            <b class="b"></b>
                            <span>{{item.forwarderName}}</span>
                        </td>
                        <td rowspan="{{item.rowsNum}}">
                            <span>{{item.trackingNumber}}</span>
                            <b class="b"></b>
                            <span>{{item.transferNumber}}</span>
                        </td>
                        <td rowspan="{{item.rowsNum}}">
                            <span>{{item.remark}}</span>
                        </td>
                        <td rowspan="{{item.rowsNum}}">
                            <div class="MroeActin" ng-mouseenter="isOver = true;" ng-mouseleave="isOver = false;">
                                <a>{{'100094' | translate}}</a>
                                <span style="height: initial;"></span>
                                <ul ng-show="isOver">
                                    <li ng-click="FPWare(item)">{{'101290' | translate}}</li>
                                    <li ng-click="exportProduct(item,'dispatchTask')">导出报关信息</li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    <tr class="tr" ng-class="{actc:itemc.checked == 1}" ng-repeat="(index1,itemc) in item.disparcherParcelList" style="height: 52px;">
                        <td>
                            <span>{{itemc.parcelName}}</span>
                        </td>
                        <td>
                            <span ng-show="itemc.property == '1'">普货</span>
                            <span ng-show="itemc.property == '0'">非普货</span>
                            <span ng-show="itemc.property == '2'">未知属性</span>
                            <span ng-show="!itemc.property"></span>
                            <b class="b"></b>
                            <span>{{itemc.parcelUse}}</span>
                        </td>
                        <td>
                            <span>{{itemc.trackingNumber}}</span>
                            <b class="b"></b>
                            <span>{{itemc.transferNumber}}</span>
                        </td>
                        <td>
                            <span>{{itemc.remark}}</span>
                        </td>
                        <td style="width: 145px;">
                            <div class="MroeActin" ng-mouseenter="isOver2 = true;" ng-mouseleave="isOver2 = false;">
                                <a>{{'100094' | translate}}</a>
                                <span style="height: initial;"></span>
                                <ul ng-show="isOver2">
                                    <li ng-click="LookDetail(itemc,index,index1)">{{'100259' | translate}}</li>
                                    <li ng-click="ExportEXcel(itemc)">{{'100068' | translate}}Excel</li>
                                    <li ng-click="exportProduct(itemc,'parcel')">导出报关信息</li>
                                </ul>
                            </div>

                        </td>
                    </tr>
                    <tr ng-show="item.disparcherParcelList.length == 0">
                        <td colspan="7" style="height: 52px;">{{'100980' | translate}}。</td>
                    </tr>
                    </tbody>
                </table>
                <!-- 分页 -->
                <div class="page-box" ng-show="datalist.length > 0">
                    <div class="select-page-num">
                        <select class="form-control" ng-model="pagesize1" ng-change="pagechange1(pagesize1)"
                                style="width: 65px;height: 31px;">
                            <option value="20">20</option>
                            <option value="30">30</option>
                            <option value="50">50</option>
                        </select>
                        <span>每页</span>
                    </div>
                    <div class="total-num">
                        共&nbsp;&nbsp;{{ totalNum1 }}&nbsp;&nbsp;条
                    </div>
                    <div class="page-index">
                        <div class="pagegroup">
                            <a href="#">&lt;&lt;</a>
                            <a href="#">&lt;</a>
                            <a href="#">1</a>
                            <a href="#">2</a>
                            <a class="current" href="#">3</a>
                            <a href="#">4</a>
                            <a href="#">5</a>
                            <a href="#">6</a>
                            <a href="#">···</a>
                            <a href="#">&gt;</a>
                            <a href="#">&gt;&gt;</a>
                        </div>
                    </div>
                    <div class="to-go">
                        <span>跳转：</span>
                        <input type="text" class="goyema form-control" placeholder="" ng-model="pagenum1">
                        <a class="btn btn-default" href="javascript: void(0);" role="button" ng-click="pagenumchange1()">go</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!---->
<a id="Excel" ng-href="{{ExcelUrl}}"></a>
<!--新增-->
<div class="asj-common-tanwrap addschFlag" ng-show="addschFlag">
    <div class="asj-common-tan tan-add-ware">
        <ul>
            <li>
                <span>原始仓:</span>
                <select ng-options="v.ID as v.STORAGE for v in cangweilist" ng-model="originalWarehouseId" ng-change="selectChange('1');">
                    <option value="">请选择</option>
                </select>
                <!--<input type="text" ng-model="originalWarehouseId">-->
            </li>
            <li>
                <span>到达仓:</span>
                <select ng-options="v.ID as v.STORAGE for v in cangweilist" ng-model="arrivedWarehouseId" ng-change="selectChange('2');">
                    <option value="">请选择</option>
                </select>
                <!--<input type="text" ng-model="arrivedWarehouseId">-->
            </li>
            <li>
                <span>名称:</span>
                <input type="text" ng-model="dispatcherTaskName">
            </li>
            <li>
                <span>追踪号:</span>
                <input type="text" ng-model="trackingNumber">
            </li>
            <li>
                <span>条形码:</span>
                <input type="text" ng-model="barCode">
            </li>
            <li>
                <span>件数:</span>
                <input type="number" ng-model="numberCases">
            </li>
            <!-- <li>
                 <span>发货状态:</span>
                 <input type="text" ng-model="shippingStatus">
             </li>-->
            <li>
                <span>预计发货时间:</span>
                <input type="text" name="" class="boxwidth-helf" placeholder="点击选择时间"
                       onClick="WdatePicker({onpicked: function(){$(this).trigger('change')},dateFmt:'yyyy-MM-dd HH:mm:ss'})"
                       ng-model="estimatedDeliveryTime">
            </li>
            <li>
                <span>备注:</span>
                <input type="text" ng-model="remark">
            </li>
            <div class="tan-btns">
                <a class="tan-btn1" ng-click="add()">确认</a>
                <a class="tan-btn0" ng-click="addschFlag = false;">取消</a>
            </div>
        </ul>
    </div>
</div>
<!--确认完成-->
<div class="asj-common-tanwrap" ng-show="addWareFlag">
    <div class="asj-common-tan tan-delete-ware">
        <h3>{{'101291' | translate}}？</h3>
        <div class="tan-btns">
            <a class="tan-btn1" ng-click="confirm()">{{'101275' | translate}}</a>
            <a class="tan-btn0" ng-click="addWareFlag=false">{{'100051' | translate}}</a>
        </div>
    </div>
</div>
<!--查验包裹-->
<div class="asj-common-tanwrap lookbgFlag" ng-show="lookbgFlag">
    <div class="asj-common-tan tan-delete-ware">
        <img src="erp_otweb/images/close.png" alt="" ng-click="close()">
        <input type="text" placeholder="请扫描包裹条形码" id="codeinput" ng-model="percelCode">
        <div style="height: 562px;overflow-y: auto;">
            <table class="ea-list-table ea-erp-cs">
                <thead>
                <tr>
                    <th><span>序号</span></th>
                    <th><span>所属包裹</span></th>
                    <th><span>SKU/订单号</span></th>
                    <th><span>商品名称/订单号</span></th>
                    <th><span>预估总重量</span></th>
                    <th><span>实际总重量</span></th>
                    <th><span>状态/操作</span></th>
                </tr>
                </thead>
                <tbody>
                <tr class="la_tr la_tr01" ng-repeat="item in percelList" ng-click="TRclick1($index)" ng-class='{focus: $index == focus1,eee:item.quantityIncoming}'>
                    <td><span>{{$index+1}}</span></td>
                    <td><span ng-attr-title="{{item.parcelName}}">{{item.parcelName}}</span></td>
                    <td><span ng-attr-title="{{item.skuOrOrderId}}">{{item.skuOrOrderId}}</span></td>
                    <td><span ng-attr-title="{{item.productName}}">{{item.productName}}</span></td>
                    <td><span ng-attr-title="{{item.estimatedTotalWeight}}">{{item.estimatedTotalWeight}}</span></td>
                    <td><span ng-attr-title="{{item.actualGrossWeight}}">{{item.actualGrossWeight}}</span></td>
                    <td>
                    <span ng-mouseenter="mouseen(item)" ng-mouseleave="mouseen(item)" style="min-height: 26px;min-width: 60px;line-height: 26px;">
                        <img ng-show="item.quantityIncoming>0 && item.type == 'order'" style="float:initial;" width="18" height="18" src="erp_otweb/images/cgstate.png" alt="">
                        <span ng-show="item.quantityIncoming>0 && item.type == 'product'">
                            <input type="number" class="actinput" ng-model="item.quantityIncoming" ng-blur="actinput(item)">/{{item.quantity}}
                        </span>
                        <a ng-show="item.ishov" role="button" style="height: 25px;line-height: 25px;" class="asj-btn-s asj-btn-s3" ng-click="confWare(item)">确认收货</a>
                    </span>
                    <span ng-show="item.isres">
                        <a  role="button" style="height: 25px;line-height: 25px;" class="asj-btn-s asj-btn-s3" ng-click="brser(item)">确认收货</a>
                    </span>
                    </td>
                </tr>
                <tr ng-if="percelList.length <= 0">
                    <td colspan="7">暂无数据。</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<!--查看详情-->
<div class="asj-common-tanwrap" ng-show="isLook">
    <div class="asj-common-tan tan-delete-ware" style="height: initial;width: 600px;">
        <h3>{{'100259' | translate}}<span class="close" ng-click="isLook = false;">×</span></h3>
        <div style="max-height: 400px;overflow-y: auto;">
            <table style="margin-bottom: initial;" class="ea-list-table ea-erp-cs" cellspacing="0" cellpadding="0">
                <thead>
                <tr>
                    <th>{{'101311' | translate}}</th>
                    <th>{{'101295' | translate}}</th>
                    <th>{{'101294' | translate}}</th>
                    <th>{{'101293' | translate}}</th>
                    <th>{{'100308' | translate}}</th>
                </tr>
                </thead>
                <tbody>
                <tr class="tr" ng-repeat="(index,item) in SkuList">
                    <td>
                        <span>{{item.skuOrOrderId}}</span>
                    </td>
                    <td>
                        <span>{{item.productName}}</span>
                    </td>
                    <td>
                        <span>{{item.actual_gross_weight}}</span>
                    </td>
                    <td>
                        <span>{{item.estimated_total_weight}}</span>
                    </td>
                    <td>
                        <span>{{item.quantity}}</span>
                    </td>
                </tr>
                <tr ng-show="item.SkuList.length == 0">
                    <td colspan="5" style="height: 52px;">{{'100980' | translate}}。</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
