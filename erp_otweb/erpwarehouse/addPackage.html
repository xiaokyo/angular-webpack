<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!--<%@LANGUAGE="VBSCRIPT" CODEPAGE="437"%>-->
    <!--<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />-->
    <title>新增包裹</title>
</head>
<style>
    body {
        font-family: PingFangSC-Medium;
    }

    .clearfix:after {
        content: "";
        display: block;
        clear: both;
    }

    .ea-content {
        overflow: hidden;
    }

    .ea-right-search {
        padding-top: initial;
    }

    .bgleft {
        width: 23%;
        float: left;
        margin-right: 2%;
    }

    .bgright {
        width: 55%;
        float: left;
        position: relative;
    }

    .search-box {
        width: auto;
    }

    .ea-right-search .input-group input {
        width: 400px;
        height: 40px;
        border-color: #F9AE08;
    }

    .ea-right-search .input-group a {
        width: 90px;
        height: 40px;
        line-height: 40px;
        background: rgba(249, 174, 8, 1);
    }

    .ea-right-search .add-merch a {
        width: 110px;
        height: 36px;
        border: none;
        line-height: 36px;
        background: rgba(252, 244, 217, 1);
        border-radius: 2px;
        color: #B0570A;
    }

    .ea-list-table th {
        height: 40px;
        background: #4A90E2;
        line-height: 40px;
        padding: initial;
        font-size: 14px;
        color: #fff;
        border-right: solid #e1e1e1 1px;
        font-weight: initial;
    }

    .ea-list-table td {
        border-right: solid #e1e1e1 1px;
    }

    .ea-list-table tr:hover {
        background: rgba(232, 242, 251, 1);
    }

    .relative a {
        color: #B05609;
        border: none;
        display: initial;
        height: initial;
    }

    .tan-add-ware {
        width: 360px;
        height: 180px;
        background: rgba(255, 255, 255, 1);
        border-radius: 4px;
    }

    .asj-common-tan h3 {
        font-size: 14px;
        font-family: PingFangSC-Medium;
        color: rgba(102, 102, 102, 1);
        line-height: 20px;
        margin: 20px 0;
        text-align: left;
    }

    .asj-common-tan .tan-btns {
        text-align: right;
    }

    .asj-common-tan .tan-btns a {
        margin: initial;
    }

    .asj-common-tan .tan-btns .tan-btn1 {
        width: 80px;
        height: 30px;
        background: rgba(249, 174, 8, 1);
        border-radius: 2px;
        color: #fff;
    }

    .asj-common-tan .tan-btns .tan-btn0 {
        width: 80px;
        height: 30px;
        border-radius: 2px;
        border: 1px solid rgba(247, 157, 45, 1);
        margin: 0 20px;
        color: #F9AE08;
        background-color: #fff;
    }

    .tabact {
        right: 0;
        transition: ease .3s;
    }

    .tan-delete-ware {
        border-radius: 4px;
    }

    .back {
        color: #999999;
        font-size: 14px;
        line-height: 40px;
        margin-left: 10px;
        cursor: pointer;
    }

    .delete {
        font-size: 12px;
        color: #000;
    }

    .delete:hover {
        color: #4A90E2;
    }

    .bgleft h3 {
        height: 40px;
        line-height: 40px;
        background: rgba(74, 144, 226, 1);
        border-radius: 4px 4px 0px 0px;
        font-size: 14px;
        color: #fff;
        margin-top: initial;
        padding-left: 20px;
    }

    .bgleft ul {
        margin-top: 20px;
        padding: 0 25px;
    }

    .bgleft li {
        margin-bottom: 10px;
        font-size: 14px;
        font-family: PingFangSC-Regular;
        color: rgba(51, 51, 51, 1);
        line-height: 10px;
        display: block;
    }

    .bgleft li span {
        display: block;
        line-height: 30px;
    }

    .bgleft li input {
        width: 100%;
        height: 34px;
        border: 1px solid rgba(238, 238, 238, 1);
        padding: 0 8px;
    }

    .bgleft li a {
        width: 80px;
        height: 34px;
        border-radius: 2px;
        border: 1px solid rgba(74, 144, 226, 1);
        display: inline-block;
        color: #4A90E2;
        text-align: center;
        line-height: 34px;
        margin-right: 15px;
    }

    .bgright .txttop {
        font-size: 14px;
        font-family: PingFangSC-Regular;
        color: rgba(51, 51, 51, 1);
        line-height: 20px;
        padding: 0 10px;
    }

    .bgright .txttop input,select {
        width: 170px;
        height: 34px;
        border: 1px solid rgba(238, 238, 238, 1);
        padding: 0 8px;
        margin-right: 10px;
    }

    .bgright .txttop textarea {
        width: 355px;
        min-height: 60px;
        border: 1px solid rgba(238, 238, 238, 1);
        float: left;
        padding: 2px 8px;
        resize: vertical;
        margin-left: 4px;
        line-height: initial;
    }

    .bgright .btns {
        position: absolute;
        bottom: -50px;
        left: 0;
        width: 100%;
    }

    .bgright .btns .save {
        width: 23%;
        height: 38px;
        background: rgba(255, 255, 255, 1);
        border-radius: 2px;
        border: 1px solid rgba(74, 144, 226, 1);
        color: #4A90E2;
        margin-right: 10px;
    }

    .bgright .btns .cancel {
        width: 24%;
        height: 38px;
        background: rgba(255, 255, 255, 1);
        border-radius: 2px;
        border: 1px solid rgba(228, 228, 228, 1);
        color: #666666;
    }

    .ea-list-table td {
        font-size: 12px;
        color: #000;
        max-width: 200px;
    }
    .ea-list-table td span {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        margin: initial;
        text-align: center;
        display: inline-block;
        cursor: pointer;
    }
    .txttop li{
        float: left;
        margin-bottom: 5px;
        font-size: 14px;
        line-height: 34px;
    }
    .txttop li span{
        width: 107px;
        text-align: right;
        display: inline-block;
    }
    .bgleft li P{
        font-size: 14px;
        color: #999;
        line-height: 22px;
    }
    button[disabled], html  input[disabled],textarea[disabled],select[disabled] {
        cursor: no-drop;
        background-color: #f6f6f6;
    }
    .right-bar .btns {
      display: flex;
    }
    .right-bar .btns a{
      width: initial;
      padding: 0 10px;
    }
    .sl-p{
      margin: 10px 0;
      font-size: 14px;
    }
</style>
<body>
<audio class="feipuhuo" src="static/audio/feipuhuo.mp3"></audio>
<div class="ea-content asj-ware-box">
    <!-- right con -->
    <div class="right-bar-wrap ea-right-content li_ea-right-content" style="min-width: 1385px;">
        <p>
            <span class="back" ng-click="back()"><-返回</span>
        </p>
        <div class="right-bar bgleft">
            <span>包裹属性:</span>
            <select ng-model="property">
                <option value="1">普货</option>
                <option value="0">非普货</option>
                <!-- <option value="3">普货加急</option>
                <option value="4">非普货加急</option> -->
                <option value="2" disabled="disabled">未知属性</option>
            </select>

            <h3 style="margin-top: 20px;">请扫描订单追踪号</h3>
            <ul>
                <li class="btns">
                  <a href="https://cc-west-usa.oss-us-west-1.aliyuncs.com/15087744/45167419339966.xlsx">下载模版</a>
                  <a href="javascript:void (0);" ng-click="upLoadExcel()">上传Excel订单</a>
                  <input style="display: none;" type="file" name="file" id="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" onchange="angular.element(this).scope().changeUpload(this.files)">
                </li>
                <li>
                    <span style="display: inline-block;">订单号:</span>
                    <span style="display: inline-block;line-height: 20px;">{{orderNum}}</span>
                </li>
                <li>
                    <span>追踪号:</span>
                    <input id="saomiao2" type="text" ng-model="ParmsNo2" placeholder="扫描追踪号">
                </li>
            </ul>
            <h3>请扫描商品SKU</h3>
            <ul>
                <li>
                    <span style="display: inline-block;">商品名称:</span>
                    <span style="display: inline-block;line-height: 20px;">{{productName}}</span>
                </li>
                <li>
                    <span>SKU:</span>
                    <input id="saomiao1" type="text" ng-model="ParmsNo1" placeholder="扫描SKU">
                </li>
                <li>
                    <span>数量:</span>
                    <input type="number" ng-model="quantity" ng-keyup="Calculation()">
                </li>
            </ul>
            <h3>重量确认</h3>
            <ul>
                <li>
                    <span>预估总重量(kg):{{estimatedTotalWeight}}</span>
                    <!--<input type="number" ng-model="estimatedTotalWeight">-->
                </li>
                <li>
                    <span>实际总重量(kg):</span>
                    <input type="number" ng-model="actualGrossWeight">
                </li>
                <li>
                    <a ng-click="addlist()">添加</a>
                    <a ng-click="reset()">重置</a>
                </li>
                <li>
                    <p>注:如若包裹内只一种商品，预估总重量/实际总重量填包裹的预估总重量/实际总重量；如若多种商品，预估总重量/实际总重量填单种商品的预估总重量/实际总重量。</p>
                </li>
            </ul>
        </div>
        <div class="right-bar bgright ">
            <!-- right list -->
            <ul class="txttop clearfix">
                <li>
                    <span>调度编号:</span>
                    <span style="width: 180px;text-align: left;">{{bgName}}</span>
                </li>
                <li ng-show="TypeFlag == 'edit'">
                    <span>*包裹编号:</span>
                    <span style="width: 180px;text-align: left;">{{parcelName}}</span>
                </li>
                <li>
                    <span>包裹用途:</span>
                    <!--city.name as city.name for city in Cities-->
                    <select ng-options="v.name as v.name for v in Percellist" ng-model="parcelUse"></select>
                </li>
                <!--   <li>
                       <span>*包裹总重量:</span>
                       &lt;!&ndash;city.name as city.name for city in Cities&ndash;&gt;
                       <input type="text" ng-model="parcelName" ng-blur="isname(parcelName)">
                   </li>-->
                <li>
                    <span>包裹追踪号:</span>
                    <input type="text"  ng-model="trackingNumber">
                </li>
                <!--<br>-->
                <li>
                    <span>包裹转单号:</span>
                    <input type="text" ng-model="transferNumber">
                </li>
                <li>
                    <span>重量:</span>
                    <input type="text" ng-model="transWeight">
                </li>
                <li class="clearfix" style="width: 572px;">
                    <span style="float:left;">包裹备注:</span>
                    <textarea ng-model="remark"  style='width: 461px;resize:none;'></textarea>
                </li>
            </ul>
            <div class="table-con-box">
                <div style="overflow: auto;height: 602px;">
                    <table class="ea-list-table ea-erp-cs">
                        <thead>
                        <tr>
                            <th><span>序号</span></th>
                            <th><span>SKU/追踪号</span></th>
                            <th><span>商品名称/订单号</span></th>
                            <th><span>预估总重量(kg)</span></th>
                            <th><span>实际总重量(kg)</span></th>
                            <th><span>数量</span></th>
                            <th><span>类型</span></th>
                            <th><span>操作</span></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="la_tr la_tr01" ng-repeat="item in ParcelData">
                            <td><span>{{$index+1}}</span></td>
                            <td><span ng-attr-title="{{item.skuOrOrderId}}">{{item.skuOrOrderId}}</span></td>
                            <td><span ng-attr-title="{{item.productName}}" style="width: 150px;">{{item.productName}}</span></td>
                            <td><span ng-attr-title="{{item.estimatedTotalWeight}}">{{item.estimatedTotalWeight}}</span></td>
                            <td><span ng-attr-title="{{item.actualGrossWeight}}">{{item.actualGrossWeight}}</span></td>
                            <td><span ng-attr-title="{{item.quantity}}">{{item.quantity}}</span></td>
                            <td>
                                <span ng-show="item.type == 'order'">订单</span>
                                <span ng-show="item.type == 'sku'">商品</span>
                                <span ng-show="item.type == 'package'">供应商包裹</span>
                            </td>
                            <td><a class="delete" ng-click="deletelist(item,$index)">删除</a></td>
                        </tr>
                        <tr ng-if="ParcelData.length <= 0">
                            <td colspan="8">暂无数据。</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="btns">
                    <!--<button class="save" ng-show="isAddBG" ng-click="AddBG()">继续添加到所选包裹</button>-->
                    <!--<button class="cancel" ng-show="isAddBG" ng-click="cancelAdd()">取消添加到所选包裹</button>-->
                    <button class="save" ng-click="Save()">保存</button>
                    <button class="cancel" ng-click="back()">关闭</button>
                </div>
            </div>
        </div>
        <div>
            <span style="padding-left: 10px;">该调度任务下已添加包裹</span><br>
            <span style="padding-left: 10px;" ng-show="TypeFlag == 'edit'">(点击包裹名称可编辑该包裹)</span>
            <table class="ea-list-table ea-erp-cs" style="width: 20%;">
                <thead>
                <tr>
                    <th><span>序号</span></th>
                    <th><span>包裹编号</span></th>
                    <th><span>数量</span></th>
                </tr>
                </thead>
                <tbody>
                <tr class="la_tr la_tr01" ng-repeat="item in ParcelDatas" ng-click="BGclick(item)">
                    <td><span>{{$index+1}}</span></td>
                    <td><span ng-attr-title="{{item.parcelName}}">{{item.parcelName}}</span></td>
                    <td><span>{{item.parcelRelationList.length}}</span></td>
                </tr>
                <tr ng-if="ParcelDatas.length <= 0">
                    <td colspan="3">暂无包裹。</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<audio class="audio-diaodubufu" src="static/audio/diaodubufu.mp3" preload="auto">
    浏览器不支持audio标签,请升级 美东
</audio>
<audio class="audio-tcjiaji" src="static/audio/touchengjiaji.mp3" preload="auto">
    浏览器不支持audio标签,请升级 头程加急
</audio>
<audio class="audio-puhuojiaji" src="static/audio/puhuo-jiaji.mp3" preload="auto">
    浏览器不支持audio标签,请升级 普货加急
</audio>
<audio class="audio-feipuhuojiaji" src="static/audio/feipuhuo-jiaji.mp3" preload="auto">
    浏览器不支持audio标签,请升级 非普货加急
</audio>
<audio class="audio-puhuo-bktj" src="static/audio/puhuo-bktj.mp3" preload="auto">
    浏览器不支持audio标签,请升级 普货不可添加
</audio>
<audio class="audio-puhuo-bjj" src="static/audio/puhuo-bjj.mp3" preload="auto">
    浏览器不支持audio标签,请升级 普货不加急
</audio>
<audio class="audio-feipuhuo-bjj" src="static/audio/feipuhuo-bjj.mp3" preload="auto">
    浏览器不支持audio标签,请升级 非普货不加急
</audio>
<div class="asj-common-tanwrap" ng-show="deleteWareFlag">
    <div class="asj-common-tan tan-delete-ware">
        <h3>是否删除？</h3>
        <div class="tan-btns">
            <a class="tan-btn1" ng-click="goDeleteWare()">确认</a>
            <a class="tan-btn0" ng-click="deleteWareFlag=false">取消</a>
        </div>
    </div>
</div>
</body>
</html>

<!--上传Excel中有订单与所选属性不符合-->
<div class="asj-common-tanwrap" ng-show="isLook">
  <div class="asj-common-tan tan-delete-ware" style="height: initial;width: 600px;">
    <h3>上传Excel中有订单与所选包裹属性不符合<span class="close" ng-click="isLook = false;">×</span></h3>
    <div style="max-height: 400px;overflow-y: auto;">
      <!--普货-->
      <div ng-show="puHuoList.length>0 && property == '0'" >
        <p class="sl-p">存在普货订单</p>
        <table style="margin-bottom: initial;" class="ea-list-table ea-erp-cs" cellspacing="0" cellpadding="0">
          <thead>
          <tr>
            <th>追踪号</th>
            <th>订单号</th>
            <th>预估总重量(kg)</th>
            <th>实际总重量(kg)</th>
            <th>数量</th>
            <th>类型</th>
          </tr>
          </thead>
          <tbody>
          <tr class="tr" ng-repeat="(index,item) in puHuoList">
            <td>
              <span>{{item.trackingNumber}}</span>
            </td>
            <td>
              <span>{{item.orderId}}</span>
            </td>
            <td>
              <span>{{item.estimatedTotalWeight}}</span>
            </td>
            <td>
              <span>{{item.actualGrossWeight}}</span>
            </td>
            <td>
              <span>{{item.number}}</span>
            </td>
            <td>
              <span>{{item.type == 'order' ? '订单':'商品'}}</span>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <!--非普货-->
      <div ng-show="feiPuHuoList.length>0 && property == '1'">
        <p class="sl-p">存在非普货订单</p>
        <table style="margin-bottom: initial;" class="ea-list-table ea-erp-cs" cellspacing="0" cellpadding="0">
        <thead>
        <tr>
          <th>追踪号</th>
          <th>订单号</th>
          <th>预估总重量(kg)</th>
          <th>实际总重量(kg)</th>
          <th>数量</th>
          <th>类型</th>
        </tr>
        </thead>
        <tbody>
        <tr class="tr" ng-repeat="(index,item) in feiPuHuoList">
          <td>
            <span>{{item.trackingNumber}}</span>
          </td>
          <td>
            <span>{{item.orderId}}</span>
          </td>
          <td>
            <span>{{item.estimatedTotalWeight}}</span>
          </td>
          <td>
            <span>{{item.actualGrossWeight}}</span>
          </td>
          <td>
            <span>{{item.number}}</span>
          </td>
          <td>
            <span>{{item.type == 'order' ? '订单':'商品'}}</span>
          </td>
        </tr>
        </tbody>
      </table>
      </div>
      <!--未找到-->
      <div ng-show="weiZhaoDaoList.length>0">
        <p class="sl-p">存在未找到订单</p>
        <table style="margin-bottom: initial;" class="ea-list-table ea-erp-cs" cellspacing="0" cellpadding="0">
          <thead>
          <tr>
            <th>追踪号</th>
            <th>订单号</th>
            <th>预估总重量(kg)</th>
            <th>实际总重量(kg)</th>
            <th>数量</th>
            <th>类型</th>
          </tr>
          </thead>
          <tbody>
          <tr class="tr" ng-repeat="(index,item) in weiZhaoDaoList">
            <td>
              <span>{{item.trackingNumber}}</span>
            </td>
            <td>
              <span>{{item.orderId}}</span>
            </td>
            <td>
              <span>{{item.estimatedTotalWeight}}</span>
            </td>
            <td>
              <span>{{item.actualGrossWeight}}</span>
            </td>
            <td>
              <span>{{item.number}}</span>
            </td>
            <td>
              <span>{{item.type == 'order' ? '订单':'商品'}}</span>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
